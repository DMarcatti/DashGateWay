<section class="content-header">
  <h1>
    Cadastro de Empresa
    <small>GateWay</small>
  </h1>
</section>
<section class="ccdontent">
  <div class="box">
    <div class="box-header" >
        <div class="box box-primary">
            <div class="box-header with-border">
              <h3 class="box-title">Quick Example</h3>
            </div>
        <form novalidate [formGroup]="empresaForm" >
          <div class="form-group" >
            <div class="col-xs-3">
              <app-input-container errorMessage="Campo Obrigatorio / Somente Numeros" label="CNPJ">
                  <input type="text" maxlength="15" class="form-control"  formControlName="cnpj" placeholder="CNPJ da Empresa">
              </app-input-container>
            </div>
            <div class="col-xs-9">            
              <app-input-container errorMessage="Campo Obrigatorio" label="Empresa">
                  <input type="text" class="form-control"  formControlName="nome" placeholder="Empresa">
              </app-input-container>
            </div>
          </div>
          <div class="form-group" formArrayName="items">
            <div *ngFor="let item of empresaForm.get('items').controls; let i=index" [formGroup]="item">
              <div class="col-xs-2" style="clear: both">
                <app-input-container errorMessage="Campo Obrigatorio" label="Produto">
                  <select class="form-control"  formControlName="selec" [attr.id]="'selec'+i">
                    <option [value]="1">option 1</option>
                    <option [value]="2">option 2</option>
                    <option [value]="3">option 3</option>
                    <option [value]="4">option 4</option>
                    <option [value]="5">option 5</option>
                  </select>
                </app-input-container>
              </div>
              <div class="col-xs-3">
                <app-input-container errorMessage="Campo Obrigatorio" label="ID">
                  <input type="text" class="form-control" [attr.id]="'name'+i" formControlName="name" placeholder="ID">
                </app-input-container>
              </div>
              <div class="col-xs-5">
                <app-input-container errorMessage="Campo Obrigatorio" label="Chave">
                  <input type="text" class="form-control" [attr.id]="'quantity'+i" formControlName="quantity" placeholder="Chave">
                </app-input-container>
              </div>
              <div class="col-xs-2" style="margin-top: 26px;">
                  <button type="button" class="btn btn-danger btn-number" (click)="empresaForm.get('items').removeAt(i)"  data-type="minus" data-field="quant[2]">
                    <span class="glyphicon glyphicon-minus"></span>
                  </button>
                  <button type="button" class="btn btn-success btn-number" data-type="plus" (click)="empresaForm.get('items').push(buildItem(''))" data-field="quant[2]">
                      <span class="glyphicon glyphicon-plus"></span>
                  </button>
              </div>
            </div>
          </div>
          <div class="form-group">
            <div class="col-md-3">
              <button type="button" [disabled]="!empresaForm.valid"  class="btn btn-block btn-primary" (click)="gravarEmpresa(empresaForm.value)">Gravar</button>
              <ng2-slim-loading-bar [height]="'10px'" ></ng2-slim-loading-bar>
            </div>                
          </div>
        </form>      
    </div>
  </div>
</section>
<app-form-debug [form]="empresaForm"></app-form-debug>
